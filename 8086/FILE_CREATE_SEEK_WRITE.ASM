.MODEL SMALL

.STACK 100H

.DATA
	FILENAME DB 'TESTFILE.TXT'
	STRING	 DB 'HELLO WORLD!'
	STRLEN = $ - OFFSET STRING
	READVAL	 DB 20 DUP('$')
	HANDLE 	 DW ?
.CODE
BEGIN:
	MOV AX, @DATA		; INITIALISE
	MOV DS, AX
	
	LEA DX, FILENAME	; CREATE FILE
	MOV CX, 0H
	MOV AH, 3CH
	INT 21H
	
	MOV HANDLE, AX

	MOV DX, 0H		; SEEK VALUE
	MOV CX, 0H	
	MOV BX, HANDLE
	MOV AL, 0H
	MOV AH, 42H
	INT 21H

	LEA DX, STRING		; WRITE IN THE FILE
	MOV CX, STRLEN
	MOV BX, HANDLE
	MOV AH, 40H
	INT 21H

	MOV BX, HANDLE		; CLOSE THE FILE
	MOV AH, 3EH
	INT 21H

	MOV AH, 4CH		; RETURN
	INT 21H
END BEGIN
